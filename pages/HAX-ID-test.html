<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAX Engineering Aptitude Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Styles adapted from the CAD Test example */
        body {
            font-family: 'Inter', sans-serif;
            /* Use Inter font */
            background-color: #f3f4f6;
            /* bg-gray-100 */
        }

        .page-section {
            display: none;
            /* Hide all pages by default */
            min-height: 80vh;
            /* Ensure pages take significant height */
        }

        .page-section.active {
            display: flex;
            /* Show the active page */
            flex-direction: column;
            justify-content: center;
            /* Center content vertically */
            align-items: center;
            /* Center content horizontally */
        }

        .content-container {
            background-color: #ffffff;
            /* bg-white */
            padding: 2rem;
            /* p-8 */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            /* shadow-md */
            width: 100%;
            max-width: 48rem;
            /* max-w-3xl */
            margin: 1rem auto;
            /* Center the box */
            margin-top: 1rem;
        }

        #userDetailsPage .content-container {
            max-width: 32rem;
            /* max-w-md */
        }

        #pager-timer-header {
            position: sticky;
            /* Makes the header stick to the top */
            top: 0;
            /* Sticks to the top of the viewport */
            z-index: 10;
            /* Ensures it stays above other elements */
            background-color: #ffffff;
            /* Matches the background color */
            padding: 1rem;
            /* Adds padding for spacing */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            /* Adds a subtle shadow for separation */
            margin-bottom: 1rem;
        }

        #questionsContainer {
            margin-top: 1rem;
            /* Ensures the quiz content starts below the sticky header */
            padding-top: 1rem;
            /* Adds padding for better spacing */
        }

        .input-field {
            margin-top: 0.25rem;
            /* mt-1 */
            display: block;
            width: 100%;
            padding: 0.5rem 0.75rem;
            /* px-3 py-2 */
            border: 1px solid #d1d5db;
            /* border-gray-300 */
            border-radius: 0.375rem;
            /* rounded-md */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            /* shadow-sm */
            font-size: 0.875rem;
            /* sm:text-sm */
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .input-field:focus {
            outline: none;
            border-color: #4f46e5;
            /* focus:border-indigo-500 */
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.3);
            /* focus:ring-indigo-500 equivalent */
        }

        .error-message {
            color: #dc2626;
            /* red-600 */
            font-size: 0.875rem;
            /* text-sm */
            margin-top: 0.25rem;
            /* mt-1 */
            display: block;
            /* Ensure it takes space */
            text-align: left;
            /* Match CAD test error alignment */
            min-height: 1.25rem;
            /* Ensure space even when empty */
        }

        .error-message.hidden {
            display: none;
        }

        .input-field.border-red-500 {
            border-color: #ef4444;
        }

        .question-container {
            background-color: #f9fafb;
            /* bg-gray-50 */
            border: 1px solid #e5e7eb;
            /* border-gray-200 */
            border-radius: 0.375rem;
            /* rounded-md */
            padding: 1.5rem;
            /* p-6 */
            margin-bottom: 1.5rem;
            /* mb-6 */
        }

        .question-text {
            font-weight: 600;
            /* font-semibold */
            margin-bottom: 1rem;
            /* mb-4 */
            color: #374151;
            /* text-gray-700 */
        }

        /* Style for question images */
        .question-image {
            display: block;
            max-width: 100%;
            /* Ensure image fits container */
            height: auto;
            /* Maintain aspect ratio */
            margin-top: 1rem;
            /* Add space above image */
            margin-bottom: 1rem;
            /* Add space below image */
            border: 1px solid #e5e7eb;
            /* Subtle border */
            border-radius: 0.375rem;
            /* Rounded corners */
        }

        .option-label {
            display: block;
            margin-bottom: 0.75rem;
            /* mb-3 */
            padding: 0.75rem;
            /* p-3 */
            border-radius: 0.375rem;
            /* rounded-md */
            background-color: #ffffff;
            /* bg-white */
            border: 1px solid #d1d5db;
            /* border-gray-300 */
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
            font-size: 0.875rem;
            /* text-sm */
            color: #374151;
            /* text-gray-700 */
        }

        .option-label:hover {
            background-color: #f3f4f6;
        }

        input[type="radio"]:checked+.option-label {
            background-color: #e0e7ff;
            /* bg-indigo-100 */
            border-color: #818cf8;
            /* border-indigo-400 */
            color: #3730a3;
            /* text-indigo-800 */
            font-weight: 500;
            /* font-medium */
        }

        input[type="radio"] {
            display: none;
        }

        .action-button {
            display: inline-flex;
            justify-content: center;
            width: 100%;
            /* w-full */
            padding: 0.5rem 1rem;
            /* py-2 px-4 */
            border: 1px solid transparent;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            /* shadow-sm */
            font-size: 0.875rem;
            /* text-sm */
            font-weight: 500;
            /* font-medium */
            border-radius: 0.375rem;
            /* rounded-md */
            color: #ffffff;
            /* text-white */
            background-color: #4f46e5;
            /* bg-indigo-600 */
            cursor: pointer;
            transition: background-color 0.15s ease-in-out;
        }

        .action-button:hover {
            background-color: #4338ca;
        }

        .action-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.5), 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        .action-button:disabled {
            background-color: #9ca3af;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .timer-container {
            font-size: 1.5rem;
            /* text-2xl */
            font-weight: 600;
            /* font-semibold */
            color: #dc2626;
            /* text-red-600 */
            text-align: right;
            /* Align to the right */
        }

        .timer-expired {
            color: #dc2626;
            font-weight: bold;
        }

        .results-container {
            margin-top: 2rem;
            /* mt-8 */
            padding: 2rem;
            /* p-8 */
            background-color: #ffffff;
            /* bg-white */
            border-radius: 0.5rem;
            /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            /* shadow-md */
            text-align: center;
            font-size: 1.125rem;
            /* text-lg */
            font-weight: 500;
            /* font-medium */
            color: #1f2937;
            /* text-gray-800 */
        }

        .diagram-svg {
            /* Kept for potential future use, but not used in current questions */
            display: block;
            margin: 1rem auto;
            max-width: 300px;
            border: 1px solid #ccc;
            background-color: #fff;
            padding: 10px;
            border-radius: 4px;
        }

        .hidden {
            display: none;
        }

        label {
            display: block;
            text-align: left;
            font-size: 0.875rem;
            /* text-sm */
            font-weight: 500;
            /* font-medium */
            color: #374151;
            /* text-gray-700 */
            margin-bottom: 0.25rem;
            /* mb-1 */
        }

        .text-center {
            text-align: center;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body class="bg-gray-100">

    <div id="userDetailsPage" class="page-section">
        <div class="bg-white p-8 rounded-lg shadow-md w-full max-w-md text-center">
            <div id="logo" class="mb-4">
                <img src="./img/logo/LOGO_HAX_GREEN.png" alt="Logo" class="h-12 mx-auto">
            </div>
            <h1 class="text-xl md:text-2xl font-bold text-center text-gray-800 mb-6">Engineering Aptitude
                Test</h1>
            <p class="text-center text-gray-600 text-sm mb-6"> Welcome to Engineering Aptitude Test. This test is designed to test your reasoning, Analytical and problem-solving skills. It consists of 40 multiple-choice questions covering various topics in engineering. <br> <br>
                Please fill in your details below to start the test. You will have<span class="text-red-600 font-bold"> <span
                    id="testDurationDisplay">30</span> minutes</span> to complete the test once you start.
            </p>
            <form id="userDetailsForm" class="space-y-4">
                <div>
                    <label for="userName">Full Name:</label>
                    <input type="text" id="userName" name="userName" required class="input-field"
                        placeholder="Enter your name">
                    <span id="userNameError" class="error-message hidden">Name is required.</span>
                </div>
                <div>
                    <label for="userEmail">Email Address:</label>
                    <input type="email" id="userEmail" name="userEmail" required class="input-field"
                        placeholder="Enter your email">
                    <span id="userEmailError" class="error-message hidden">Please enter a valid email address.</span>
                </div>
                <div>
                    <label for="userPhone">Phone Number:</label>
                    <input type="tel" id="userPhone" name="userPhone" required class="input-field"
                        placeholder="Enter your phone number">
                    <span id="userPhoneError" class="error-message hidden">Phone number is required.</span>
                </div>
                <div class="pt-2">
                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition duration-150 ease-in-out padding-2 mt-4">Start Test</button>
                </div>
            </form>
        </div>
    </div>

    <div id="quizPage" class="page-section hidden">
        <div id="pager-timer-header" class="content-container">

            <div class="flex justify-between items-center mb-4 border-b border-gray-200 pb-4">
                <h1 class="text-xl font-bold text-gray-800">Test In Progress</h1>

                <div id="timer" class="timer-container">30:00</div>
            </div>
            <div class="mb-6 p-4 bg-gray-50 rounded-md border border-gray-200 text-sm text-gray-600">
                <p><strong>Name:</strong> <span id="displayUserName"></span></p>
                <p><strong>Email:</strong> <span id="displayUserEmail"></span></p>
                <p> ________________________________________________<span id="displayUserEmail"></span></p>
                <p><strong>Total No of Questions : 40</strong> <span id="totalQuestions"></span></p>
                <p><strong>Attempted Questions :</strong> <span id="attemptedQuestions"></span></p>
            </div>
        </div>

        <div class="content-container">

            <form id="quizForm">
                <div id="questionsContainer">
                </div>
                <div class="text-center mt-8">
                    <button type="submit" id="submitButton" class="action-button w-auto px-6">Submit Test</button>
                </div>
            </form>
        </div>
    </div>

    <div id="resultsPage" class="page-section hidden">
        <div class="content-container max-w-md">
            <svg class="mx-auto h-12 w-12 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"
                aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h1 class="text-2xl font-bold mt-4 mb-4 text-center text-gray-800">Test Submitted!</h1>
            <div id="results" class="results-container shadow-none border-none bg-transparent p-0 mt-0 text-center">
                Calculating results...
            </div>
            <p class="text-center text-gray-600 mt-4 text-sm">Thank you for completing the test. Your results have been
                recorded.</p>
            <div id="submissionStatus" class="text-center text-sm mt-2"></div>
        </div>
    </div>

    <script>
        // --- Configuration ---
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwLNLbHLXdDwpxGJt-dmL6LV0Wfr8I-bOUPqb5lbtA-o7OPkYQL2lBz0UqP5sPauOPIjg/exec"; // !!! IMPORTANT: Replace !!!
        const QUIZ_DURATION_MINUTES = 30;

        // --- HAX Engineering Intern Assessment Test Data ---

        // --- ID Intern Questionnaire Data (from PDF) ---

const questions = [
    // Section 1: Design Principles & Aesthetics
    {
        question: "1. Dieter Rams, known for his work with Braun, famously advocated for which design principle?",
        options: [
            "a) Design should draw attention to itself",
            "b) Good design is as little design as possible",
            "c) Form should prioritize artistic expression",
            "d) More features mean better design"
        ],
        correctAnswer: 1, // b
        image: null
    },
    {
        question: "2. What does the principle of \"closure\" in design refer to?",
        options: [
            "a) Completing incomplete shapes mentally",
            "b) Grouping similar elements",
            "c) Leading the eye along a path",
            "d) Separating dissimilar elements"
        ],
        correctAnswer: 0, // a
        image: null
    },
    {
        question: "3. A composition features a large, dark shape on one side balanced by several smaller, lighter shapes scattered on the other. This is best described as:",
        options: [
            "a) Symmetrical Balance",
            "b) Approximate Symmetry",
            "c) Asymmetrical Balance",
            "d) Radial Balance"
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "4. In design, what does the term \"affordance\" refer to?",
        options: [
            "a) The aesthetic appeal of a product that enhances brand recognition",
            "b) The quality of a material that determines its durability and strength",
            "c) A feature or aspect of an object that suggests how it should be used",
            "d) The ability of a product to be manufactured at a low cost"
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "5. Identify the principle demonstrated in the image.", // Image was present in PDF
        options: [
            "a) Similarity",
            "b) Proximity",
            "c) Closure",
            "d) Figure-Ground"
        ],
        correctAnswer: 0, // a
        image: './img/quiz-img/id-question-05.png'
    },
    {
        question: "6. A product's successful form most effectively integrates balance, composition, and proportion to primarily enhance:",
        options: [
            "a) Manufacturing efficiency and material cost reduction.",
            "b) Visual appeal and intuitive interaction throughout its use.",
            "c) Brand recognition and differentiation in the market.",
            "d) The complexity of its internal mechanisms and technological features."
        ],
        correctAnswer: 1, // b
        image: null
    },
    // Section 2: Ergonomics & Human Factors
    {
        question: "7. What does 'anthropometry' provide data for in the design process?",
        options: [
            "a) Market size and potential sales volume",
            "b) Human body measurements and dimensions",
            "c) Material strength and stress tolerance",
            "d) User psychological profiles"
        ],
        correctAnswer: 1, // b
        image: null
    },
    {
        question: "8. When designing for users, the first step should focus on:",
        options: [
            "a) Exploring material costs and availability",
            "b) Conducting research to identify the user's need",
            "c) Creating initial marketing content",
            "d) Start building a rough prototype"
        ],
        correctAnswer: 1, // b
        image: null
    },
    {
        question: "9. When considering reach and accessibility in design, what percentile of the user population is typically accommodated for maximum reach distances?",
        options: [
            "a) 5th percentile",
            "b) 25th percentile",
            "c) 50th percentile",
            "d) 95th percentile"
        ],
        correctAnswer: 0, // a
        image: null
    },
    {
        question: "10. Which of the following is a common symptom of poorly designed interfaces or tools that do not consider human factors?",
        options: [
            "a) Increased user satisfaction and efficiency.",
            "b) Reduced error rates and improved safety.",
            "c) User fatigue, discomfort, and increased risk of injury.",
            "d) Lower product manufacturing costs."
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "11. What does the term \"haptic feedback\" refer to in user interfaces?",
        options: [
            "a) Visual cues that indicate a successful interaction.",
            "b) Auditory signals that provide information to the user.",
            "c) Tactile sensations that provide confirmation to the user.",
            "d) Changes in the color or brightness of a display."
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "12. When designing a safety-critical interface (e.g., in a medical device), which ergonomic principle is paramount in preventing errors?",
        options: [
            "a) Minimizing the number of colors used in the interface.",
            "b) Including as many functions as possible in a single screen for efficiency.",
            "c) Ensuring the interface is visually attractive and modern.",
            "d) Designing for clear visibility, intuitive controls, and unambiguous feedback."
        ],
        correctAnswer: 3, // d
        image: null
    },
    // Section 3: Materials & Manufacturing Processes
    {
        question: "13. CMF in Industrial Design stands for:",
        options: [
            "a) Cost, Manufacturing, Functionality",
            "b) Color, Material, Finish",
            "c) Concept, Model, Finalize",
            "d) Creative, Modern, Futuristic"
        ],
        correctAnswer: 1, // b
        image: null
    },
    {
        question: "14. What is the most common manufacturing process used to make plastic bottles?",
        options: [
            "a) Injection molding",
            "b) Compression molding",
            "c) Blow molding",
            "d) Thermoforming"
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "15. \"Draft angle\" is important in injection molding because:",
        options: [
            "a) For better ergonomics",
            "b) To reduce material cost",
            "c) To reduce mold cost",
            "d) To remove parts easily"
        ],
        correctAnswer: 3, // d
        image: null
    },
    {
        question: "16. Tolerances are critical because:",
        options: [
            "a) They decide color consistency",
            "b) They eliminate need for testing",
            "c) They improve aesthetics",
            "d) They determine fit and function"
        ],
        correctAnswer: 3, // d
        image: null
    },
    {
        question: "17. What is SLS in 3D printing?",
        options: [
            "a) A process that solidifies liquid resin layer by layer",
            "b) A process that melts metal rods into shape",
            "c) A process that fuses plastic powder using a laser",
            "d) A process that extrudes filament through a heated nozzle"
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "18. Which of these is NOT a CAD file format?",
        options: [
            "a) STL",
            "b) STEP",
            "c) IGES",
            "d) DXF"
        ],
        correctAnswer: 3, // d (Based on provided answer in PDF, though DXF is a CAD format)
        image: null
    },
    // Section 4: Sketching & Visualization
    {
        question: "19. Which drawing technique is typically used to represent a 3D object on a 2D surface where parallel lines remain parallel?",
        options: [
            "a) Isometric drawing",
            "b) Trimetric drawing",
            "c) Orthographic drawing",
            "d) Perspective drawing"
        ],
        correctAnswer: 0, // a
        image: null
    },
    {
        question: "20. Which perspective does this image have?", // Image was present in PDF
        options: [
            "a) One-point perspective",
            "b) Two-point perspective",
            "c) Three-point perspective",
            "d) Isometric view"
        ],
        correctAnswer: 1, // b
        image: './img/quiz-img/id-question-20.png'
    },
    {
        question: "21. Shown below is a strip of paper which is folded multiple times. How many red pawns are placed on the same side of the paper as the blue pawn?", // Image was present in PDF
        options: [
            "a) 8",
            "b) 9",
            "c) 10",
            "d) 11"
        ],
        correctAnswer: 1, // b
        image: './img/quiz-img/id-question-21.png'
    },
    {
        question: "22. Which option is a simple rotation of the image given below?", // Image was present in PDF
        options: [
            "A) Option A", // Options were images labeled A, B, C, D
            "B) Option B",
            "C) Option C",
            "D) Option D"
        ],
        correctAnswer: 1, // B
        image: './img/quiz-img/id-question-22.png'
    },
    {
        question: "23. Which option will replace the ”?” in the following series?", // Image was present in PDF
        options: [
            "a) Option a", // Options were images labeled a, b, c, d
            "b) Option b",
            "c) Option c",
            "d) Option d"
        ],
        correctAnswer: 2, // c
        image: './img/quiz-img/id-question-23.png'
    },
    // Section 5: Design Process & Research
    {
        question: "24. Which of the following best describes a \"mock-up\" in the design process?",
        options: [
            "a) A quick concept sketch used to explore initial design ideas",
            "b) A working model created to test performance, mechanisms, or user interaction",
            "c) A non-functional model used to visualize the product's appearance, form, and ergonomics",
            "d) A small batch of fully functional models manufactured for initial market or user testing"
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "25. The iterative nature of the design process means:",
        options: [
            "a) Design follows a linear path, with each phase fully completed before the next.",
            "b) Designers often go back to earlier steps based on what they learn later",
            "c) A finalized concept is set early, reducing changes during testing.",
            "d) It's a final step to refine the chosen design for production"
        ],
        correctAnswer: 1, // b
        image: null
    },
    {
        question: "26. In the design process, \"pain points\" refer to:",
        options: [
            "a) Physical problems like sharp edges, rough surfaces, or unstable bases",
            "b) Manufacturing defects that occur during mass production",
            "c) Positive emotional moments created by thoughtful user interaction",
            "d) Specific frustrations that users face while interacting with a product"
        ],
        correctAnswer: 3, // d
        image: null
    },
    {
        question: "27. Why are Gestalt principles important in the context of design?",
        options: [
            "a) They help determine appropriate product dimensions to suit a wide range of human body sizes",
            "b) They provide rules for creating emotional branding through material selection",
            "c) They help users intuitively understand its function through form",
            "d) They influence how users interpret and relate to visual arrangements and spatial composition"
        ],
        correctAnswer: 3, // d
        image: null
    },
    {
        question: "28. What is SCAMPER in the design process?",
        options: [
            "a) A method to create new ideas by modifying existing designs",
            "b) A tool for checking if a design meets functional goals",
            "c) A process for organizing the steps of a design project",
            "d) A technique for comparing different design concepts"
        ],
        correctAnswer: 0, // a
        image: null
    },
    {
        question: "29. Why is minimizing part count beneficial?",
        options: [
            "a) Reduces design time",
            "b) Reduces cost and errors",
            "c) Improves surface quality and finish",
            "d) Supports a more minimal aesthetic"
        ],
        correctAnswer: 1, // b
        image: null
    },
    {
        question: "30. What is \"lateral thinking\" in the context of idea generation?",
        options: [
            "a) Systematically analyzing a problem to find the most logical solution",
            "b) Exploring alternative problem pathways by deliberately shifting perspective",
            "c) Focusing on incremental improvements to existing solutions",
            "d) Strictly adhering to established brainstorming rules"
        ],
        correctAnswer: 1, // b
        image: null
    },
    // Section 6: Design Thinking & Manufacturing
    {
        question: "31. Which stage in the Design Thinking process helps uncover feasibility constraints and gather feedback by exploring early versions of ideas?",
        options: [
            "a) Empathize",
            "b) Define",
            "c) Ideate",
            "d) Prototype"
        ],
        correctAnswer: 3, // d
        image: null
    },
    {
        question: "32. The \"Discover\" phase in the Double Diamond approach is best described as:",
        options: [
            "a) Conducting broad research to explore the problem space",
            "b) Narrowing down insights to define the core design challenge",
            "c) Developing and iterating on potential solutions",
            "d) Finalizing and implementing the chosen solution"
        ],
        correctAnswer: 0, // a
        image: null
    },
    {
        question: "33. In DFMA, what is the main purpose of reducing the number of individual parts in a product?",
        options: [
            "a) Improve airflow and thermal performance during operation",
            "b) Enhance the visual complexity and perceived value",
            "c) Reduce tooling requirements, assembly steps, and failure points",
            "d) Increase the number of modular functions in a single unit"
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "34. Which assembly technique avoids the use of fasteners?",
        options: [
            "a) Snap fits",
            "b) Welding",
            "c) Adhesives",
            "d) Riveting"
        ],
        correctAnswer: 0, // a
        image: null
    },
    {
        question: "35. When creating a sheet metal prototype, what is a critical consideration regarding bend radii?",
        options: [
            "a) Bend radii have no impact on the structural integrity of the part",
            "b) The bend radius should be as small as possible to minimize material usage",
            "c) The bend radius must be compatible with the material thickness to avoid cracking",
            "d) Standardized bend radii should always be avoided to create unique designs"
        ],
        correctAnswer: 2, // c
        image: null
    },
    {
        question: "36. What is the difference between subtractive and additive manufacturing?",
        options: [
            "a) Subtractive removes material from a larger body, while additive forms geometry by layering material",
            "b) Subtractive creates shape by depositing material selectively; additive sculpts material using cutting tools",
            "c) Subtractive and additive both build parts layer by layer, but subtractive uses reverse slicing",
            "d) Subtractive shapes are defined by fusion of surfaces; additive uses tooling paths to eliminate excess"
        ],
        correctAnswer: 0, // a
        image: null
    },
    // Section 7: Product Strategy & Teamwork
    {
        question: "37. What best describes a Minimum Viable Product (MVP) in the context of design and innovation?",
        options: [
            "a) A feature-complete version of the product used to evaluate long-term scaling potential",
            "b) A visual-only prototype meant to test branding and interface without real functionality",
            "c) A refined beta release used primarily for public marketing and acquisition",
            "d) A minimal but functional version launched to a small audience to validate key assumptions quickly"
        ],
        correctAnswer: 3, // d
        image: null
    },
    {
        question: "38. What is a common challenge encountered during the transition from prototyping to mass production?",
        options: [
            "a) The availability of skilled designers for large-scale production",
            "b) Ensuring consistent quality and tolerances at high volumes",
            "c) The lack of interest from consumers in mass-produced goods",
            "d) The ease of scaling up 3D printing technology for mass production"
        ],
        correctAnswer: 1, // b
        image: null
    },
    {
        question: "39. What is a Bill of Materials (BOM) in the context of manufacturing?",
        options: [
            "a) A comprehensive list of all components required to manufacture a product",
            "b) A summarized report of operational timelines and production labor estimates",
            "c) A cost breakdown of material, tooling, packaging, and transportation logistics",
            "d) A sequence of actions used to monitor quality across manufacturing stages"
        ],
        correctAnswer: 0, // a
        image: null
    },
    {
        question: "40. Why is effective teamwork and collaboration important in an industrial design environment?",
        options: [
            "a) It helps maintain consistent visual language across isolated design stages",
            "b) It improves efficiency by aligning diverse expertise and reducing gaps between disciplines",
            "c) It allows each team member to focus on their tasks without dependency",
            "d) It ensures faster approvals by minimizing iterations and shared decisions"
        ],
        correctAnswer: 1, // b
        image: null
    }
];


        // --- DOM Elements ---
        const userDetailsPage = document.getElementById('userDetailsPage');
        const quizPage = document.getElementById('quizPage');
        const resultsPage = document.getElementById('resultsPage');
        const userDetailsForm = document.getElementById('userDetailsForm');
        const quizForm = document.getElementById('quizForm');
        const questionsContainer = document.getElementById('questionsContainer');
        const resultsContainer = document.getElementById('results');
        const timerDisplay = document.getElementById('timer');
        const submitButton = document.getElementById('submitButton');
        const submissionStatus = document.getElementById('submissionStatus');
        const userNameInput = document.getElementById('userName');
        const userEmailInput = document.getElementById('userEmail');
        const userPhoneInput = document.getElementById('userPhone');
        const userNameError = document.getElementById('userNameError');
        const userEmailError = document.getElementById('userEmailError');
        const userPhoneError = document.getElementById('userPhoneError');
        const displayUserName = document.getElementById('displayUserName');
        const displayUserEmail = document.getElementById('displayUserEmail');
        const testDurationDisplay = document.getElementById('testDurationDisplay');
        const attemptedQuestions = document.getElementById('attemptedQuestions');



        // --- State ---
        let userAnswers = {};
        let userDetails = {};
        let timerInterval = null;
        let quizEndTime = null;
        let timeTaken = 0;
        let quizSubmitted = false;
        let attemptedQuestionsCount = 0;
        // --- Functions ---

        function showPage(pageId) {
            document.querySelectorAll('.page-section').forEach(page => {
                page.classList.remove('active');
                page.classList.add('hidden');
            });
            const pageToShow = document.getElementById(pageId);
            if (pageToShow) {
                pageToShow.classList.remove('hidden');
                pageToShow.classList.add('active');
            } else {
                console.error("Page not found:", pageId);
            }
            window.scrollTo(0, 0);
        }

        function clearErrors() {
            userNameError.classList.add('hidden');
            userEmailError.classList.add('hidden');
            userPhoneError.classList.add('hidden');
            userNameInput.classList.remove('border-red-500');
            userEmailInput.classList.remove('border-red-500');
            userPhoneInput.classList.remove('border-red-500');
            submissionStatus.textContent = '';
        }

        function validateUserDetails() {
            clearErrors();
            let isValid = true;
            const name = userNameInput.value.trim();
            const email = userEmailInput.value.trim();
            const phone = userPhoneInput.value.trim();

            if (!name) {
                userNameError.textContent = 'Name is required.';
                userNameError.classList.remove('hidden');
                userNameInput.classList.add('border-red-500');
                isValid = false;
            }
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email) {
                userEmailError.textContent = 'Email is required.';
                userEmailError.classList.remove('hidden');
                userEmailInput.classList.add('border-red-500');
                isValid = false;
            } else if (!emailRegex.test(email)) {
                userEmailError.textContent = 'Please enter a valid email address.';
                userEmailError.classList.remove('hidden');
                userEmailInput.classList.add('border-red-500');
                isValid = false;
            }
            if (!phone) {
                userPhoneError.textContent = 'Phone number is required.';
                userPhoneError.classList.remove('hidden');
                userPhoneInput.classList.add('border-red-500');
                isValid = false;
            }
            return isValid;
        }

        function handleUserDetailsSubmit(event) {
            event.preventDefault();
            if (!validateUserDetails()) return;

            userDetails = {
                name: userNameInput.value.trim(),
                email: userEmailInput.value.trim(),
                phone: userPhoneInput.value.trim()
            };
            displayUserName.textContent = userDetails.name;
            displayUserEmail.textContent = userDetails.email;
            localStorage.setItem('quizUserDetails', JSON.stringify(userDetails));
            localStorage.setItem('quizUserAnswers', JSON.stringify({}));
            startQuiz();
        }

        function startQuiz() {
            renderQuestions();
            startTimer();
            // initializeQuizState();
            showPage('quizPage');
        }

        /**
         * Renders questions, options, and images (if available).
         */
        function renderQuestions() {
            questionsContainer.innerHTML = '';
            const savedAnswers = JSON.parse(localStorage.getItem('quizUserAnswers') || '{}');
            userAnswers = savedAnswers;

            questions.forEach((q, index) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'question-container';
                questionDiv.id = `question-${index}`;

                // Add Question Text
                const questionText = document.createElement('div');
                questionText.className = 'question-text';
                // Use innerHTML in case question text contains simple formatting like <b>
                // Be cautious if questions come from untrusted sources.
                questionText.innerHTML = q.question;
                questionDiv.appendChild(questionText);

                // Add Image if available
                if (q.image && q.image.trim() !== "") { // Check if image URL is not null or empty
                    const imgElement = document.createElement('img');
                    imgElement.src = q.image;
                    imgElement.alt = `Image for question ${index + 1}`;
                    imgElement.className = 'question-image'; // Apply styling
                    // Add error handling for broken image links
                    imgElement.onerror = function () {
                        this.alt = `Image for question ${index + 1} failed to load.`;
                        this.style.display = 'none'; // Hide broken image icon
                        // Optionally display a placeholder or message
                        const errorMsg = document.createElement('p');
                        errorMsg.textContent = '[Image failed to load]';
                        errorMsg.className = 'text-red-500 text-sm my-4';
                        questionDiv.insertBefore(errorMsg, optionsDiv); // Insert before options
                    };
                    questionDiv.appendChild(imgElement);
                }


                // Add Options
                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'options-container';

                q.options.forEach((option, optionIndex) => {
                    const optionId = `q${index}_option${optionIndex}`;
                    const radioInput = document.createElement('input');
                    radioInput.type = 'radio';
                    radioInput.name = `question${index}`;
                    radioInput.value = optionIndex;
                    radioInput.id = optionId;
                    radioInput.className = 'option-radio';
                    radioInput.addEventListener('change', () => handleAnswerSelection(index, optionIndex));

                    if (savedAnswers[index] === optionIndex) {
                        radioInput.checked = true;
                    }

                    const optionLabel = document.createElement('label');
                    optionLabel.htmlFor = optionId;
                    optionLabel.textContent = option;
                    optionLabel.className = 'option-label';
                    optionLabel.id = `label-${optionId}`;

                    optionsDiv.appendChild(radioInput);
                    optionsDiv.appendChild(optionLabel);
                });

                questionDiv.appendChild(optionsDiv);
                questionsContainer.appendChild(questionDiv);
            });
        }

        function handleAnswerSelection(questionIndex, optionIndex) {
            if (quizSubmitted) return;

            // Check if the question was previously unanswered
            if (!userAnswers.hasOwnProperty(questionIndex)) {
                attemptedQuestionsCount++; // Increment the count for a new attempt
            }

            // Update the user's answer
            userAnswers[questionIndex] = optionIndex;

            // Save the updated answers to localStorage
            localStorage.setItem('quizUserAnswers', JSON.stringify(userAnswers));

            // Update the attempted questions count in the UI
            updateAttemptedQuestionsCount();
        }

        function updateAttemptedQuestionsCount() {
            const attemptedQuestionsElement = document.getElementById('attemptedQuestions');
            attemptedQuestionsElement.textContent = attemptedQuestionsCount;
        }



        function handleAnswerSelection(questionIndex, optionIndex) {
            if (quizSubmitted) return;

            // Check if the question was previously unanswered
            if (!userAnswers.hasOwnProperty(questionIndex)) {
                attemptedQuestionsCount++; // Increment the count for a new attempt
            }

            // Update the user's answer
            userAnswers[questionIndex] = optionIndex;

            // Save the updated answers to localStorage
            localStorage.setItem('quizUserAnswers', JSON.stringify(userAnswers));

            // Update the attempted questions count in the UI
            updateAttemptedQuestionsCount();
        }

        function startTimer() {
            const savedEndTime = localStorage.getItem('quizEndTime');
            const now = Date.now();

            if (savedEndTime && parseInt(savedEndTime) > now) {
                quizEndTime = parseInt(savedEndTime);
            } else {
                quizEndTime = now + QUIZ_DURATION_MINUTES * 60 * 1000;
                localStorage.setItem('quizEndTime', quizEndTime);
            }

            updateTimerDisplay();
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                const remaining = quizEndTime - Date.now();
                if (remaining <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time Expired!";
                    timerDisplay.classList.add('timer-expired');
                    forceSubmitQuiz();
                } else {
                    updateTimerDisplay();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const remaining = Math.max(0, quizEndTime - Date.now());
            const minutes = Math.floor((remaining / 1000 / 60) % 60);
            const seconds = Math.floor((remaining / 1000) % 60);
            timerDisplay.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            timerDisplay.classList.remove('timer-expired');
        }

        function calculateScore() {
            let score = 0;
            questions.forEach((q, index) => {
                if (userAnswers.hasOwnProperty(index) && userAnswers[index] === q.correctAnswer) {
                    score++;
                }
            });
            return score;
        }

        function generateDetailedResultsCSV() {
            const results = [];
            for (let i = 0; i < questions.length; i++) {
                if (!userAnswers.hasOwnProperty(i)) {
                    results.push("U"); // Unanswered
                } else if (userAnswers[i] === questions[i].correctAnswer) {
                    results.push("C"); // Correct
                } else {
                    results.push("I"); // Incorrect
                }
            }
            return results.join(',');
        }

        function calculateTimeTaken() {
            const endTime = Date.now();
            const startTime = quizEndTime - (QUIZ_DURATION_MINUTES * 60 * 1000);
            timeTaken = Math.round((endTime - startTime) / 1000);
            timeTaken = Math.min(timeTaken, QUIZ_DURATION_MINUTES * 60);
            timeTaken = Math.max(0, timeTaken);
        }

        function handleQuizSubmit(event) {
            if (event) event.preventDefault();
            if (quizSubmitted) return;
            forceSubmitQuiz();
        }

        function forceSubmitQuiz() {
            if (quizSubmitted) return;
            quizSubmitted = true;
            clearInterval(timerInterval);
            calculateTimeTaken();
            const score = calculateScore();
            const detailedResultsCSV = generateDetailedResultsCSV();

            submitButton.disabled = true;
            submitButton.textContent = 'Submitting...';
            document.querySelectorAll('.option-radio').forEach(radio => radio.disabled = true);

            const formData = {
                ...userDetails,
                timestamp: new Date().toISOString(),
                score: score,
                timeTaken: timeTaken,
                results: detailedResultsCSV
            };

            sendDataToGoogleSheet(formData);

            showPage('resultsPage');
            resultsContainer.textContent = `Calculating results...`;

            setTimeout(() => {
                resultsContainer.innerHTML = `Your Score: <strong class="text-xl">${score}</strong> / ${questions.length}`;
            }, 500);

            localStorage.removeItem('quizUserDetails');
            localStorage.removeItem('quizUserAnswers');
            localStorage.removeItem('quizEndTime');
        }

        function sendDataToGoogleSheet(data) {
            submissionStatus.textContent = '';
            if (!SCRIPT_URL || SCRIPT_URL === "YOUR_APPS_SCRIPT_WEB_APP_URL_HERE") {
                console.error("Google Apps Script URL is not configured!");
                submissionStatus.textContent = "Error: Could not submit results (URL missing).";
                submissionStatus.style.color = 'red';
                return;
            }
            const queryParams = new URLSearchParams(data);
            const urlWithParams = `${SCRIPT_URL}?${queryParams.toString()}`;
            console.log("Submitting to:", urlWithParams);

            fetch(urlWithParams, { method: "GET", mode: "no-cors" })
                .then(() => {
                    console.log("Data submission initiated (no-cors).");
                    submissionStatus.textContent = "Results submitted successfully.";
                    submissionStatus.style.color = 'green';
                })
                .catch(error => {
                    console.error("Error submitting data:", error);
                    submissionStatus.textContent = `Error: Could not submit results (${error.message}).`;
                    submissionStatus.style.color = 'red';
                });
        }
        function initializeQuizState() {
            const savedDetails = localStorage.getItem('quizUserDetails');
            const savedEndTime = localStorage.getItem('quizEndTime');
            const savedAnswers = JSON.parse(localStorage.getItem('quizUserAnswers') || '{}');
            const now = Date.now();
            testDurationDisplay.textContent = QUIZ_DURATION_MINUTES;

            // Calculate the initial number of attempted questions
            attemptedQuestionsCount = Object.keys(savedAnswers).length;
            updateAttemptedQuestionsCount(); // Update the UI with the initial count

            if (savedDetails && savedEndTime && parseInt(savedEndTime) > now) {
                userDetails = JSON.parse(savedDetails);
                console.log("Resuming quiz for:", userDetails.email);
                displayUserName.textContent = userDetails.name;
                displayUserEmail.textContent = userDetails.email;
                startQuiz();
            } else {
                showPage('userDetailsPage');
                localStorage.removeItem('quizUserDetails');
                localStorage.removeItem('quizUserAnswers');
                localStorage.removeItem('quizEndTime');
            }
        }

        // --- Event Listeners ---
        userDetailsForm.addEventListener('submit', handleUserDetailsSubmit);
        quizForm.addEventListener('submit', handleQuizSubmit);

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', initializeQuizState);

    </script>

</body>

</html>